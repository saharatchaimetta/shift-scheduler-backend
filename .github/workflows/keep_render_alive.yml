name: Keep Render Alive

on:
  schedule:
    - cron: "*/5 * * * *"  # üîÅ ‡∏£‡∏±‡∏ô‡∏ó‡∏∏‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ (‡πÄ‡∏ß‡∏•‡∏≤ UTC)
  workflow_dispatch:        # ‚úÖ ‡∏Å‡∏î ‚ÄúRun workflow‚Äù ‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢

jobs:
  ping:
    runs-on: ubuntu-latest

    steps:
      - name: Ping FastAPI to keep Render awake (timeout 30s)
        run: |
          response=$(curl --connect-timeout 30 --max-time 240 -s -o /dev/null -w "%{http_code}" https://shift-scheduler.onrender.com/ping)
          echo "Response code: $response"
          if [ "$response" -ne 200 ]; then
            echo "‚ùå API is not responding properly (timeout or bad status)"
            exit 1
          fi
